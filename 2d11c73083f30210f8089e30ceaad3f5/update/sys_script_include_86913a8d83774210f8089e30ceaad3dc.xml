<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_984628_csd_chat.Importer</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Importer</description>
        <name>Importer</name>
        <script><![CDATA[class Importer {

    static import(table, shortDescription, properties) {

        try {

            var impSet = new GlideRecord('sys_import_set');
            impSet.initialize();
            impSet.mode = "asynchronous";
            impSet.state = "loading";
            impSet.table_name = table;
            impSet.short_description = shortDescription;
            var impSet_id = impSet.insert();


            properties.sys_import_set = impSet.sys_id;

            x_984628_core_sm_n.GlideUtils.insertRecord(impSet.table_name, properties);

            //Finished loading the import set
            impSet.state = "loaded";
            impSet.load_completed = GlideDateTime().getDisplayValue();
            impSet.update();

            //Transforming the data

            var transformer = new GlideImportSetTransformer();
            transformer.transformAllMaps(impSet); //Transform the import set rows

            if (transformer.isError()) {
                gs.error('Error executing the transform');
            }


        } catch (ex) {
            var message = ex.message;
            gs.error('Error: ' + message, 'Import XXXX');
        }
    }

}]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2024-08-02 06:00:01</sys_created_on>
        <sys_id>86913a8d83774210f8089e30ceaad3dc</sys_id>
        <sys_mod_count>5</sys_mod_count>
        <sys_name>Importer</sys_name>
        <sys_package display_value="CSD Chat Bot SM.now" source="x_984628_csd_chat">2d11c73083f30210f8089e30ceaad3f5</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="CSD Chat Bot SM.now">2d11c73083f30210f8089e30ceaad3f5</sys_scope>
        <sys_update_name>sys_script_include_86913a8d83774210f8089e30ceaad3dc</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2024-08-07 09:25:41</sys_updated_on>
    </sys_script_include>
</record_update>
